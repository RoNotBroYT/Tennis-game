<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Side View Tennis</title>
  <style>
    body { margin: 0; background: #87ceeb; }
    canvas { display: block; margin: 0 auto; background: #4caf50; }
  </style>
</head>
<body>
<canvas id="game" width="800" height="400"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const GRAVITY = 0.4;
const GROUND_Y = 350;
const NET_X = 400;
const PLAYER_WIDTH = 20;
const PLAYER_HEIGHT = 50;
const BALL_RADIUS = 8;

// Player 1 (You)
let player1 = {
  x: 100,
  y: GROUND_Y - PLAYER_HEIGHT,
  vx: 0,
  vy: 0,
  onGround: true
};

// Player 2 (AI)
let player2 = {
  x: 700,
  y: GROUND_Y - PLAYER_HEIGHT,
  vx: 0,
  vy: 0,
  onGround: true
};

let ball = {
  x: 200,
  y: 300,
  vx: 4,
  vy: -6
};

let keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function drawCourt() {
  ctx.fillStyle = "#fff";
  ctx.fillRect(0, GROUND_Y, canvas.width, 3); // ground
  ctx.fillRect(NET_X - 2, GROUND_Y - 40, 4, 40); // net
}

function drawPlayers() {
  ctx.fillStyle = "blue";
  ctx.fillRect(player1.x, player1.y, PLAYER_WIDTH, PLAYER_HEIGHT);

  ctx.fillStyle = "red";
  ctx.fillRect(player2.x, player2.y, PLAYER_WIDTH, PLAYER_HEIGHT);
}

function drawBall() {
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, BALL_RADIUS, 0, Math.PI * 2);
  ctx.fill();
}

function movePlayer(player, control = true) {
  const speed = 4;
  if (control) {
    if (keys["a"]) player.vx = -speed;
    else if (keys["d"]) player.vx = speed;
    else player.vx = 0;

    if (keys["w"] && player.onGround) {
      player.vy = -10;
      player.onGround = false;
    }
  }

  player.x += player.vx;
  player.y += player.vy;
  player.vy += GRAVITY;

  if (player.y >= GROUND_Y - PLAYER_HEIGHT) {
    player.y = GROUND_Y - PLAYER_HEIGHT;
    player.vy = 0;
    player.onGround = true;
  }

  // Boundaries
  if (control) {
    player.x = Math.max(0, Math.min(NET_X - PLAYER_WIDTH, player.x)); // can't cross net
  } else {
    player.x = Math.max(NET_X + 2, Math.min(canvas.width - PLAYER_WIDTH, player.x));
  }
}

function moveBall() {
  ball.x += ball.vx;
  ball.y += ball.vy;
  ball.vy += GRAVITY;

  // Bounce off ground
  if (ball.y + BALL_RADIUS >= GROUND_Y) {
    ball.y = GROUND_Y - BALL_RADIUS;
    ball.vy *= -0.9;
  }

  // Bounce off left/right
  if (ball.x < 0 || ball.x > canvas.width) {
    ball.vx *= -1;
  }

  // Bounce off net
  if (
    ball.x + BALL_RADIUS > NET_X - 2 &&
    ball.x - BALL_RADIUS < NET_X + 2 &&
    ball.y + BALL_RADIUS > GROUND_Y - 40
  ) {
    ball.vx *= -1;
    ball.x = ball.x < NET_X ? NET_X - BALL_RADIUS - 2 : NET_X + BALL_RADIUS + 2;
  }
